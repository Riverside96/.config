/*Copyright (c) 2022 ksoft http://www.dummysoftware.com*/async function isRegistered(){var e=protect(await getStorage("Expression"));return 0==e.indexOf("^O")&&e.indexOf("0$")==e.length-2}function validateRegistrationCode(){var r,n;validateRegistrationForm()&&(r=document.querySelector("#txtCode").value.trim(),(n=document.querySelector("#dialog-message-icon")).classList.add("ui-icon-circle-close"),getUrlResponse("http://www.dummysoftware.com/cgi-bin/checkregcode_easyautorefresh.pl?"+r,async function(e){if(e)if(e.error)document.querySelector("#dialog-message-text").innerHTML=e.error;else if(200<=e.status&&e.status<400)try{var t=JSON.parse(e.body);"OK"===t.result&&(await setStorage("Expression",protect("^O"+r+"0$")),await dataSync(),n.classList.remove("ui-icon-circle-close"),n.classList.add("ui-icon-circle-check")),document.querySelector("#dialog-message-text").innerHTML=t.message}catch(e){document.querySelector("#dialog-message-text").innerHTML="Error in response. Please uninstall and reinstall the app and enter your code again. (C1)"}else document.querySelector("#dialog-message-text").innerHTML="Error "+e.status+", "+(e.request?e.request.statusText:"")+". Please check your connection and try again. (D1)";else document.querySelector("#dialog-message-text").innerHTML="Error connecting to server. Please check your connection and try again. (B1)";t=document.querySelector("#dialog-message");t.removeEventListener("click",onDialogMessageClick),t.addEventListener("click",onDialogMessageClick),fadeIn(t)}))}function onDialogMessageClick(){fadeOut(document.querySelector("#dialog-message"))}function getUrlResponse(e,t){var r=new XMLHttpRequest;r.open("GET",e),r.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),r.onload=function(){t({status:r.status,body:r.responseText,request:r})},r.onerror=function(){t({error:"Error connecting to server. Please check your Internet connection and try again. (A1)",request:r})},r.send()}function protect(e){var t="";if(null!=e)for(i=0;i<e.length;++i)t+=String.fromCharCode(7^e.charCodeAt(i));return t}